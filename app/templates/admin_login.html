{% extends "base.html" %}
{% block content %}
<div class="card" style="max-width:720px;margin:24px auto">
  <h1>Admin Sign in</h1>
  <h2 class="muted" style="font-weight:normal;margin-top:-6px">
    Sign in with the <strong>{{ admin_username or 'admin' }}</strong> account.
    The username is fixed; just enter the admin password below.
  </h2>

  {% if error %}<p class="error">{{ error }}</p>{% endif %}

  <form method="post" action="{{ url_for('main.admin_login') }}">
    <label>Username</label>
    <input type="text" name="username" value="{{ admin_username or 'admin' }}" readonly>

    <label>Password</label>
    <div class="row" style="gap:8px; align-items:center">
      <input id="adminPwd" type="password" name="password" placeholder="Type admin password…" required style="flex:1">
      <button type="button" class="secondary" id="togglePwd" aria-controls="adminPwd" style="white-space:nowrap">Show</button>
    </div>

    <div class="row" style="justify-content:space-between; align-items:center; margin-top:12px">
      <!-- If you already have an admin reset route, make it /admin-reset; using a literal href avoids build errors -->
      <a class="muted" href="{{ url_for('main.admin_reset') }}">Forgot password?</a>
      <div>
        <button type="submit">Login</button>
      </div>
    </div>
  </form>

  <div class="spacer"></div>
  <div class="row" style="gap:8px">
    <a href="{{ url_for('main.entry') }}"><button class="secondary">← Back</button></a>
    <a href="{{ url_for('main.login') }}"><button class="secondary">Use a test user</button></a>
  </div>
</div>

<script>
  (function () {
    const input = document.getElementById('adminPwd');
    const btn = document.getElementById('togglePwd');
    if (input && btn) {
      btn.addEventListener('click', () => {
        const isPwd = input.type === 'password';
        input.type = isPwd ? 'text' : 'password';
        btn.textContent = isPwd ? 'Hide' : 'Show';
      });
    }
  })();
</script>
{% endblock %}

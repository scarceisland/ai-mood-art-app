{% if error %}
  <p class="error">{{ error }}</p>
{% elif saved %}
  <h2>Thanks!</h2>
  <p>Your feedback was saved. You can generate another image above.</p>
{% else %}
  <div class="grid">
    <div>
      <img class="art" src="{{ image_url }}" alt="Generated art">
    </div>
    <div>
      <h2>Advice</h2>
      <p>{{ advice }}</p>
      <div class="spacer"></div>

      <form
        hx-post="{{ url_for('main.feedback') }}"
        hx-target="#result"
        hx-swap="innerHTML"
        hx-indicator="#spinner"
      >
        <input type="hidden" name="emotion" value="{{ emotion }}">
        <input type="hidden" name="prompt" value="{{ prompt }}">
        <input type="hidden" name="image_url" value="{{ image_url }}">
        <input type="hidden" name="advice" value="{{ advice }}">

        <label>Did the image match your mood?</label>
        <select name="predicted_correct" required>
          <option value="">-- select --</option>
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>

        <label>Was the advice OK?</label>
        <select name="advice_ok" required>
          <option value="">-- select --</option>
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>

        <label>Any comments?</label>
        <textarea name="comments" placeholder="(optional)"></textarea>

        <div class="spacer"></div>
        <button type="submit">Submit feedback & finish</button>
      </form>
    </div>
  </div>
{% endif %}
